{% extends "base.html" %}
{% block title %}Seznam produktov{% endblock %}
{% block content %}
    <h1>Seznam produktov</h1>
    <form method="get" action="/products">
        <select name="stock_filter">
            <option value="all" {% if stock_filter == 'all' %}selected{% endif %}>Vsi</option>
            <option value="in_stock" {% if stock_filter == 'in_stock' %}selected{% endif %}>Na zalogi</option>
            <option value="out_of_stock" {% if stock_filter == 'out_of_stock' %}selected{% endif %}>Ni zaloge</option>
        </select>
    </form>

    <div class="product-container">
        {% for productID, Ime_produkta, Opis_produkta, Cena_produkta, Stock in products %}
            <div class="product-card">
                <h3>{{ Ime_produkta }}</h3>
                <p>{{ Opis_produkta }}</p>
                <p>Cena: {{ Cena_produkta }} â‚¬</p>
                <p>Na zalogi: {{ Stock }}</p>
            </div>
            {% if loop.index % 3 == 0 %}
                <div class="clearfix"></div>
            {% endif %}
        {% endfor %}
    </div>

    <script>
    document.querySelectorAll('select').forEach(select => {
        select.addEventListener('change', function () {
            this.form.submit();
        });
    });
    </script>
{% endblock %}